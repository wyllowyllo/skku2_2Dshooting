# C\# 코딩 컨벤션 및 스타일 가이드

이 문서는 프로젝트 내 C\# 코드의 일관성, 가독성, 유지 보수성 확보를 위한 공식 코딩 규칙을 정의합니다. 모든 Pull Request(PR)는 아래 명시된 규칙을 준수해야 합니다.

---

## 0. 🤖 코드 리뷰 봇 지침 (Gemini Code Assistant)

* **리뷰 언어:** Gemini Code Assistant는 모든 코드 리뷰 요약 및 코멘트를 **한국어(Korean)**로 작성해야 합니다. 한국인이 쉽게 이해할 수 있도록 명확하고 자연스러운 한글 설명을 사용해야 하며, 영어나 기타 언어 사용은 허용되지 않습니다.
* **디자인 원칙 검토:** 모든 PR에 대해 **SOLID 원칙**과 **디미터의 법칙(Law of Demeter)** 위반 여부를 중점적으로 확인하고 피드백을 제공해야 합니다.

### 0.1. 핵심 디자인 원칙 상세 설명 (SOLID & LoD)

유연하고 유지 보수하기 쉬운 객체 지향 설계를 위해 다음 원칙을 준수해야 합니다.

#### 0.1.1. SOLID 원칙 (객체 지향 설계의 5가지 기본 원칙)

| 약어 | 원칙 | 핵심 요약 |
| :---: | :--- | :--- |
| **S** | **단일 책임 원칙 (SRP)** | 클래스는 **단 하나의 변경 이유**만 가져야 합니다. 하나의 책임만 담당하도록 설계합니다. |
| **O** | **개방-폐쇄 원칙 (OCP)** | 코드는 **확장에는 열려 있어야** 하지만, **수정에는 닫혀 있어야** 합니다. 기존 코드 변경 없이 기능을 확장할 수 있어야 합니다. |
| **L** | **리스코프 치환 원칙 (LSP)** | 상위 타입 객체를 하위 타입 객체로 **치환해도 프로그램이 문제없이 작동**해야 합니다. 자식 클래스는 부모의 계약을 이행해야 합니다. |
| **I** | **인터페이스 분리 원칙 (ISP)** | 클라이언트가 사용하지 않는 인터페이스에 의존하게 하지 않도록, **단일 목적의 작은 인터페이스**를 선호합니다. |
| **D** | **의존성 역전 원칙 (DIP)** | **고수준/저수준 모듈 모두 추상화에 의존**해야 합니다. 추상화가 세부 사항(구현)에 의존해서는 안 됩니다. |

#### 0.1.2. 디미터의 법칙 (Law of Demeter, LoD)

* **핵심 지침:** 객체 간의 결합도를 낮추고 캡슐화를 강화합니다. **"오직 가장 가까운 친구와만 이야기하라"**는 원칙을 따릅니다.
* **준수 범위:** 메서드 내부에서는 다음 객체들의 메서드만 호출해야 합니다.
    1.  현재 객체 **자신**.
    2.  메서드의 **매개변수로 전달된 객체**.
    3.  현재 객체의 **필드(멤버 변수)**로 가지고 있는 객체.
    4.  메서드 내에서 **새로 생성된 객체**.
* **위반 방지:** `a.getB().getC().doSomething()`과 같은 **"기차 참사(Train Wreck)"** 패턴을 피하여 다른 객체의 내부 구조에 깊이 의존하는 것을 방지해야 합니다.

---

## 1. 🛠️ 도구 및 파일 구성 지침

* **스타일 자동 적용:** 팀 내 일관성 유지를 위해 **`.editorconfig`** 파일을 사용하여 IDE에서 스타일 지침을 자동으로 적용해야 합니다.
* **코드 분석:** 원하는 규칙을 적용하기 위해 **코드 분석(Code Analysis)**을 사용하며, CI 빌드 단계에서 규칙 위반 시 경고 및 진단이 발생하도록 구성해야 합니다.

---

## 2. 📝 C\# 언어 사용 및 구문 규칙

* **최신 기능 활용:** 가능하면 최신 C\# 언어 기능을 활용하고, 오래된 구문은 사용하지 않습니다.
* **데이터 형식:** 런타임 형식(예: `System.Int32`) 대신 **언어 키워드**(`int`, `string`)를 사용합니다. 부호 없는 형식보다 `int` 사용을 선호합니다.
* **`var` 사용:** 변수 형식을 **명확히 유추할 수 있는 경우에만** `var`를 사용합니다.
* **문자열 처리:**
    * 짧은 연결에는 **문자열 보간**(`$"{}"`)을 사용합니다.
    * 루프 내 대용량에는 **`System.Text.StringBuilder`**를 사용합니다.
    * 긴 메시지에는 **원시 문자열 리터럴**(`"""..."""`) 사용을 권장합니다.
* **컬렉션 초기화:** **컬렉션 식(`[]`)**을 사용하여 모든 컬렉션 형식을 초기화합니다.
* **대리자:** 사용자 정의 대리자 대신 **`Func<>` 또는 `Action<>`**을 사용합니다.
* **비동기 처리:** I/O 작업에는 **`async`/`await`**를 사용하며, 교착 상태에 주의하며 필요시 **`Task.ConfigureAwait`** 사용을 고려합니다.
* **예외 처리:** **처리할 수 있는 특정 예외만 `catch`**하며, 일반적인 `System.Exception`을 포괄적으로 잡지 않습니다. 특정 예외 유형을 사용하여 의미 있는 오류 메시지를 제공합니다.

---

## 3. 🏷️ 명명 규칙 (Naming Conventions)

### 3.1. PascalCase (파스칼 표기법) 사용 대상

* **형식:** 클래스, 구조체, 레코드(`record`), 대리자(`delegate`)
* **인터페이스:** **`I`** 접두사를 붙인 PascalCase를 사용합니다.
* **공용 멤버:** 속성, 메서드, 이벤트, 공용 필드
* **상수:** 정적 필드와 로컬 상수를 포함한 모든 상수에 사용합니다.
* **레코드의 기본 생성자 매개변수:** Public 속성이 되므로 PascalCase를 사용합니다.

### 3.2. camelCase (카멜 표기법) 사용 대상

* **변수:** 메서드 매개변수, 지역 변수
* **클래스 및 구조체의 기본 생성자 매개변수:** 다른 메서드 매개변수와 동일하게 camelCase를 사용합니다.

### 3.3. 필드 명명 및 접두사

| 대상 | 접두사 | 예시 | 비고 |
| :--- | :--- | :--- | :--- |
| Private 인스턴스 필드 | `_` (밑줄) | `_workerQueue` | 이름은 camelCase 사용 |
| 정적 필드 | `s_` | `s_defaultLogger` | 이름은 camelCase 사용 |
| 스레드 정적 필드 | `t_` | `t_timeSpan` | 이름은 camelCase 사용 |

### 3.4. 일반 명명 원칙

* **명확성:** 의미 있고 설명적인 이름을 사용하며, **간결성보다 명확성**을 우선합니다.
* **밑줄 연속 사용:** 두 개의 연속된 밑줄(`__`)은 사용하지 않습니다.
* **단일 문자 이름:** 단순 루프 카운터를 제외하고 단일 문자 이름 사용을 피해야 합니다.
* **네임스페이스:** 역방향 도메인 이름 표기법을 따르는 의미 있는 이름을 사용합니다.

---

## 4. 📐 레이아웃 및 주석 규칙

* **들여쓰기:** **4개의 공백**을 사용하며, 탭은 사용하지 않습니다.
* **중괄호 스타일 (Bracing):** **"Allman" 스타일**을 사용합니다. 여는 중괄호와 닫는 중괄호는 자체 줄에 위치하며 현재 들여쓰기 수준에 맞춥니다.
* **코드 밀도:** 한 줄에 하나의 문장 및 하나의 선언만 작성합니다.
* **빈 줄:** 메서드 정의와 속성 정의 간에는 한 줄 이상의 빈 줄을 추가합니다.
* **주석 (코드):** **`//`**를 사용하며, 코드 줄 끝이 아닌 **별도의 줄**에 배치합니다. 주석 텍스트는 **대문자로 시작**하고 끝에 **마침표**를 찍습니다.
* **XML 주석:** **모든 공용 멤버**에는 XML 주석을 사용하여 설명해야 합니다.